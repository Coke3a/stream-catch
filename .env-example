SERVICE_NAME=
STAGE=

SERVER_PORT_BACKEND=
SERVER_PORT_WORKER=
SERVER_BODY_LIMIT= # MB
SERVER_TIMEOUT= # seconds

DATABASE_URL=

# Plans
STREAMCATCH_FREE_PLAN_ID=00000000-0000-0000-0000-000000000000

# Supabase
SUPABASE_PROJECT_URL=https://<your-project-id>.supabase.co
# JWT secret from Supabase settings (for HS256)
SUPABASE_JWT_SECRET=your_supabase_jwt_secret_here
SUPABASE_POSTER_BUCKET=recording-posters
SUPABASE_S3_ENDPOINT=${SUPABASE_PROJECT_URL}/storage/v1/s3
SUPABASE_S3_REGION=us-east-1
SUPABASE_S3_ACCESS_KEY_ID=
SUPABASE_S3_SECRET_ACCESS_KEY=
SUPABASE_POSTER_PREFIX=recordings

# Signed watch URL (Cloudflare Worker)
# Secret used to sign watch-url tokens (HS256). Keep this private.
WATCH_URL_JWT_SECRET=change-me-in-production
WATCH_URL_BASE_URL=https://streamcatch-gateway.wongsakon-hon.workers.dev
WATCH_URL_TTL_SECONDS=600 # seconds, optional override

# Stripe
STRIPE_SECRET_KEY=sk_test_123
STRIPE_WEBHOOK_SECRET=whsec_123
STRIPE_SUCCESS_URL=https://example.com/checkout/success?session_id={CHECKOUT_SESSION_ID}
STRIPE_CANCEL_URL=https://example.com/checkout/cancel

# Video storage (S3-compatible, e.g., Wasabi)
# Use the region-specific Wasabi endpoint (e.g., https://s3.ap-southeast-1.wasabisys.com)
VIDEO_STORAGE_S3_ENDPOINT=https://s3.us-east-1.wasabisys.com
VIDEO_STORAGE_S3_REGION=us-east-1
VIDEO_STORAGE_S3_BUCKET=
VIDEO_STORAGE_S3_ACCESS_KEY_ID=
VIDEO_STORAGE_S3_SECRET_ACCESS_KEY=
VIDEO_STORAGE_S3_KEY_PREFIX=recordings
VIDEO_STORAGE_MULTIPART_ENABLED=true
VIDEO_STORAGE_MULTIPART_THRESHOLD_BYTES=268435456 # 256MB; set 0 to force multipart for all files
VIDEO_STORAGE_MULTIPART_PART_SIZE_MB=128 # part size in MiB (5..=5120)
VIDEO_STORAGE_MULTIPART_PER_FILE_CONCURRENCY=4
VIDEO_STORAGE_MULTIPART_GLOBAL_CONCURRENCY=8
VIDEO_STORAGE_MULTIPART_MAX_RETRIES=5
VIDEO_STORAGE_MULTIPART_BACKOFF_BASE_MS=500
VIDEO_STORAGE_MULTIPART_BACKOFF_MAX_MS=15000
WASABI_UPLOAD_MAX_FILES_IN_FLIGHT=1 # keep 1 for now; raise to upload multiple files

# Discord notifications (optional)
# If DISCORD_WEBHOOK_URL is set, notifications are enabled by default.
DISCORD_NOTIFY_ENABLED=true
DISCORD_WEBHOOK_URL=
DISCORD_NOTIFY_LEVEL=error
# Separate alert channel for recording engine errors (optional)
DISCORD_RECORDING_ENGINE_ERROR_WEBHOOK_URL=

# Internal cleanup token
INTERNAL_CLEANUP_TOKEN=change-me-in-production

# Worker: recording engine container output path mapping
# Example: container emits `/app/recordings/foo.mp4` and worker reads it from the host filesystem.
RECORDING_ENGINE_HOST_BASE_PATH=/home/coke/projects-2/orec
RECORDING_ENGINE_CONTAINER_PREFIX=/app/
